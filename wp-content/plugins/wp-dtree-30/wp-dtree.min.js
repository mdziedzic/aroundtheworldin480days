function dtNode(e,t,n,r,i,s,o){this.id=e;this.pid=t;this.name=n;this.url=r;this.title=i;this.rsspath=o;var u,a,f;this.target=s;this.icon=u;this.iconOpen=a;this._io=f||false;this._is=false;this._ls=false;this._hc=false;this._ai=0;this._p}function wpdTree(e,t,n){this.config={target:null,folderLinks:false,useSelection:false,useCookies:true,useLines:true,useIcons:false,useStatusText:false,closeSameLevel:false,inOrder:false};this.icon={root:WPdTreeSettings.imgurl+"dtree-img/empty.gif",folder:WPdTreeSettings.imgurl+"dtree-img/folder.gif",folderOpen:WPdTreeSettings.imgurl+"dtree-img/folderopen.gif",node:WPdTreeSettings.imgurl+"dtree-img/page.gif",empty:WPdTreeSettings.imgurl+"dtree-img/empty.gif",line:WPdTreeSettings.imgurl+"dtree-img/line.gif",join:WPdTreeSettings.imgurl+"dtree-img/join.gif",joinBottom:WPdTreeSettings.imgurl+"dtree-img/joinbottom.gif",plus:WPdTreeSettings.imgurl+"dtree-img/plus.gif",plusBottom:WPdTreeSettings.imgurl+"dtree-img/plusbottom.gif",minus:WPdTreeSettings.imgurl+"dtree-img/minus.gif",minusBottom:WPdTreeSettings.imgurl+"dtree-img/minusbottom.gif",nlPlus:WPdTreeSettings.imgurl+"dtree-img/nolines_plus.png",nlMinus:WPdTreeSettings.imgurl+"dtree-img/nolines_minus.png"};this._url=t;this._truncate=n;this._objName=e;this.adtNodes=[];this.aIndent=[];this.root=new dtNode("root");this.selecteddtNode=null;this.selectedFound=false;this.completed=false}wpdTree.prototype.a=function(e,t,n,r,i,s,o){if(o!=""){o="<a class='dtree-rss' href='"+this._url+o+"' title='Feed for "+n+"'></a>"}i+="";var u=i;if(!i.indexOf("http://")==0){u=this._url+i}if(!r){r=n}if(this._truncate>0){n=this.truncate(n,this._truncate)}this.adtNodes[this.adtNodes.length]=new dtNode(e,t,n,u,r,s,o)};wpdTree.prototype.truncate=function(e,t){var t=t||16;var n="...";if(e.length>t){return e.slice(0,t-n.length)+n}return e};wpdTree.prototype.openAll=function(){this.oAll(true)};wpdTree.prototype.closeAll=function(){this.oAll(false)};wpdTree.prototype.toString=function(){var e=this._objName.substr(0,3);var t='<div class="dtree_'+e+'" id="dtree_'+this._objName+'">\n';if(document.getElementById){if(this.config.useCookies)this.selecteddtNode=this.getSelected();t+=this.adddtNode(this.root)}else t+="Browser not supported.";t+="</div>";if(!this.selectedFound)this.selecteddtNode=null;this.completed=true;return t};wpdTree.prototype.adddtNode=function(e){var t="";var n=0;if(this.config.inOrder)n=e._ai;for(n;n<this.adtNodes.length;n++){if(this.adtNodes[n].pid==e.id){var r=this.adtNodes[n];r._p=e;r._ai=n;this.setCS(r);if(!r.target&&this.config.target)r.target=this.config.target;if(r._hc&&!r._io&&this.config.useCookies)r._io=this.isOpen(r.id);if(!this.config.folderLinks&&r._hc)r.url=null;if(this.config.useSelection&&r.id==this.selecteddtNode&&!this.selectedFound){r._is=true;this.selecteddtNode=n;this.selectedFound=true}t+=this.node(r,n);if(r._ls)break}}return t};wpdTree.prototype.node=function(e,t){var n='<div class="dtNode">'+this.indent(e,t);if(this.config.useIcons){if(!e.icon)e.icon=this.root.id==e.pid?this.icon.root:e._hc?this.icon.folder:this.icon.node;if(!e.iconOpen)e.iconOpen=e._hc?this.icon.folderOpen:this.icon.node;if(this.root.id!=e.pid){n+='<img id="i'+this._objName+t+'" src="'+(e._io?e.iconOpen:e.icon)+'" alt="" />'}}if(this.root.id!=e.pid){if(e.url){n+='<a id="s'+this._objName+t+'" class="'+(this.config.useSelection?e._is?"nodeSel":"node":"node")+'" href="'+e.url+'"';if(e.title)n+=' title="'+e.title+'"';if(e.target)n+=' target="'+e.target+'"';if(this.config.useStatusText)n+=" onmouseover=\"window.status='"+e.name+"';return true;\" onmouseout=\"window.status='';return true;\" ";if(this.config.useSelection&&(e._hc&&this.config.folderLinks||!e._hc))n+=' onclick="javascript: '+this._objName+".s("+t+');"';n+=">"}else if((!this.config.folderLinks||!e.url)&&e._hc&&e.pid!=this.root.id){n+='<a href="javascript: '+this._objName+".o("+t+');"';if(true||e.title)n+=' title="'+e.title+'"';n+=' class="node">'}n+=e.name;if(e.url||(!this.config.folderLinks||!e.url)&&e._hc)n+="</a>"}if(e.rsspath){n+=e.rsspath}n+=" </div>";if(e._hc){n+='<div id="d'+this._objName+t+'" class="clip" style="display:'+(this.root.id==e.pid||e._io?"block":"none")+';">';n+=this.adddtNode(e);n+="</div>"}this.aIndent.pop();return n};wpdTree.prototype.indent=function(e,t){var n="";if(this.root.id!=e.pid){for(var r=0;r<this.aIndent.length;r++)n+='<img src="'+(this.aIndent[r]==1&&this.config.useLines?this.icon.line:this.icon.empty)+'" alt="" />';e._ls?this.aIndent.push(0):this.aIndent.push(1);if(e._hc){n+='<a href="javascript: '+this._objName+".o("+t+');"><img id="j'+this._objName+t+'" src="';if(!this.config.useLines)n+=e._io?this.icon.nlMinus:this.icon.nlPlus;else n+=e._io?e._ls&&this.config.useLines?this.icon.minusBottom:this.icon.minus:e._ls&&this.config.useLines?this.icon.plusBottom:this.icon.plus;n+='" alt="" width="8" height="8" /></a>'}else n+='<img src="'+(this.config.useLines?e._ls?this.icon.joinBottom:this.icon.join:this.icon.empty)+'" alt="" />'}return n};wpdTree.prototype.setCS=function(e){var t;for(var n=0;n<this.adtNodes.length;n++){if(this.adtNodes[n].pid==e.id)e._hc=true;if(this.adtNodes[n].pid==e.pid)t=this.adtNodes[n].id}if(t==e.id)e._ls=true};wpdTree.prototype.getSelected=function(){var e=this.getCookie("cs"+this._objName);return e?e:null};wpdTree.prototype.s=function(e){if(!this.config.useSelection)return;var t=this.adtNodes[e];if(t._hc&&!this.config.folderLinks)return;if(this.selecteddtNode!=e){if(this.selecteddtNode||this.selecteddtNode==0){eOld=document.getElementById("s"+this._objName+this.selecteddtNode);if(eOld){eOld.className="node"}}eNew=document.getElementById("s"+this._objName+e);if(eNew){eNew.className="nodeSel"}this.selecteddtNode=e;if(this.config.useCookies)this.setCookie("cs"+this._objName,t.id)}};wpdTree.prototype.o=function(e){var t=this.adtNodes[e];this.nodeStatus(!t._io,e,t._ls);t._io=!t._io;if(this.config.closeSameLevel)this.closeLevel(t);if(this.config.useCookies)this.updateCookie()};wpdTree.prototype.oAll=function(e){for(var t=0;t<this.adtNodes.length;t++){if(this.adtNodes[t]._hc&&this.adtNodes[t].pid!=this.root.id){if(this.adtNodes[t]._io!=e)this.nodeStatus(e,t,this.adtNodes[t]._ls);this.adtNodes[t]._io=e}}if(this.config.useCookies)this.updateCookie()};wpdTree.prototype.openTo=function(e,t,n){if(!n){for(var r=0;r<this.adtNodes.length;r++){if(this.adtNodes[r].id==e){e=r;break}}}var i=this.adtNodes[e];if(i===undefined)return;if(i.pid==this.root.id||!i._p)return;i._io=true;i._is=t;if(this.completed&&i._hc)this.nodeStatus(true,i._ai,i._ls);if(this.completed&&t)this.s(i._ai);else if(t)this._sn=i._ai;this.openTo(i._p._ai,false,true)};wpdTree.prototype.closeLevel=function(e){for(var t=0;t<this.adtNodes.length;t++){if(this.adtNodes[t].pid==e.pid&&this.adtNodes[t].id!=e.id&&this.adtNodes[t]._hc){this.nodeStatus(false,t,this.adtNodes[t]._ls);this.adtNodes[t]._io=false;this.closeAllChildren(this.adtNodes[t])}}};wpdTree.prototype.closeAllChildren=function(e){for(var t=0;t<this.adtNodes.length;t++){if(this.adtNodes[t].pid==e.id&&this.adtNodes[t]._hc){if(this.adtNodes[t]._io)this.nodeStatus(false,t,this.adtNodes[t]._ls);this.adtNodes[t]._io=false;this.closeAllChildren(this.adtNodes[t])}}};wpdTree.prototype.nodeStatus=function(e,t,n){eDiv=document.getElementById("d"+this._objName+t);eJoin=document.getElementById("j"+this._objName+t);if(this.config.useIcons){eIcon=document.getElementById("i"+this._objName+t);eIcon.src=e?this.adtNodes[t].iconOpen:this.adtNodes[t].icon}eJoin.src=this.config.useLines?e?n?this.icon.minusBottom:this.icon.minus:n?this.icon.plusBottom:this.icon.plus:e?this.icon.nlMinus:this.icon.nlPlus;if(WPdTreeSettings.animate==="1"&&typeof jQuery=="function"){e?jQuery(eDiv).slideDown(parseInt(WPdTreeSettings.duration)):jQuery(eDiv).slideUp(parseInt(WPdTreeSettings.duration))}else{eDiv.style.display=e?"block":"none"}};wpdTree.prototype.clearCookie=function(){var e=new Date;var t=new Date(e.getTime()-1e3*60*60*24);this.setCookie("co"+this._objName,"cookieValue",t);this.setCookie("cs"+this._objName,"cookieValue",t)};wpdTree.prototype.setCookie=function(e,t,n,r,i,s){document.cookie=escape(e)+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(r?"; path="+r:"; path=/")+(i?"; domain="+i:"")+(s?"; secure":"")};wpdTree.prototype.getCookie=function(e){var t="";var n=document.cookie.indexOf(escape(e)+"=");if(n!=-1){var r=n+(escape(e)+"=").length;var i=document.cookie.indexOf(";",r);if(i!=-1)t=unescape(document.cookie.substring(r,i));else t=unescape(document.cookie.substring(r))}return t};wpdTree.prototype.updateCookie=function(){var e="";for(var t=0;t<this.adtNodes.length;t++){if(this.adtNodes[t]._io&&this.adtNodes[t].pid!=this.root.id){if(e)e+=".";e+=this.adtNodes[t].id}}this.setCookie("co"+this._objName,e)};wpdTree.prototype.isOpen=function(e){var t=this.getCookie("co"+this._objName).split(".");for(var n=0;n<t.length;n++)if(t[n]==e)return true;return false};if(!Array.prototype.push){Array.prototype.push=function(){for(var t=0;t<arguments.length;t++)this[this.length]=arguments[t];return this.length}}if(!Array.prototype.pop){Array.prototype.pop=function(){lastElement=this[this.length-1];this.length=Math.max(this.length-1,0);return lastElement}}